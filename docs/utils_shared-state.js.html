<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/shared-state.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/shared-state.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { reactive } from 'vue'

/**
 * 全局解析缓存
 * @typedef {Object} SharedParseResult
 * @property {Object|null} file - 解析后的文件对象
 * @property {Object|null} lmem - 解析后的 LMEM 数据
 * @property {Object|null} timestep - 解析后的 Timestep 数据
 * @property {Object|null} profile - 解析后的 Profile 数据
 * @property {Object|null} chip - 解析后的 Chip 数据
 * @property {Object} valid - 各数据类型的有效性标记
 * @property {boolean} valid.lmem - LMEM 数据是否有效
 * @property {boolean} valid.timestep - Timestep 数据是否有效
 * @property {boolean} valid.profile - Profile 数据是否有效
 * @property {boolean} valid.chip - Chip 数据是否有效
 */
export const sharedParseResult = {
  file: null,
  lmem: null,
  timestep: null,
  profile: null,
  chip: null,
  valid: { lmem: false, timestep: false, profile: false },
}

// 事件总线（极简）
/**
 * 事件总线
 * @type {EventTarget}
 */
export const eventBus = new EventTarget()

// 标记是否已解析，方便
export function hasValidData () {
  return sharedParseResult.valid.lmem || sharedParseResult.valid.timestep
}

// 页面共享配置项
/**
 * Lmem和Timestep页面共享配置项
 */
export const sharedConfig = reactive({
  shape_secs: [1, 1, 1, 1, 1],
})


// 统一入口：写回 + 广播 
/**
 * 设置共享配置项并通知变更
 * @param {string} key 配置项键
 * @param {*} value 配置项值
 */
export function setSharedConfig(key, value) {
  sharedConfig[key] = value
  eventBus.dispatchEvent(new CustomEvent('shared-config-changed', {
    detail: { key, value }
  }))
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="EChartsManager.html">EChartsManager</a></li><li><a href="module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#TYPE_MAP">TYPE_MAP</a></li><li><a href="global.html#bankColor">bankColor</a></li><li><a href="global.html#buildDeps">buildDeps</a></li><li><a href="global.html#buildGlobalTimeAxis">buildGlobalTimeAxis</a></li><li><a href="global.html#buildSummaryOption">buildSummaryOption</a></li><li><a href="global.html#buildTimeStepOption">buildTimeStepOption</a></li><li><a href="global.html#collectProducers">collectProducers</a></li><li><a href="global.html#createColorMap">createColorMap</a></li><li><a href="global.html#createLane">createLane</a></li><li><a href="global.html#eventBus">eventBus</a></li><li><a href="global.html#genProfileOption">genProfileOption</a></li><li><a href="global.html#generateLmemOption">generateLmemOption</a></li><li><a href="global.html#getColor">getColor</a></li><li><a href="global.html#getHeightRatio">getHeightRatio</a></li><li><a href="global.html#getLabel">getLabel</a></li><li><a href="global.html#makeSegment">makeSegment</a></li><li><a href="global.html#makeSegmentAbsolute">makeSegmentAbsolute</a></li><li><a href="global.html#parseSegments">parseSegments</a></li><li><a href="global.html#setSharedConfig">setSharedConfig</a></li><li><a href="global.html#sharedConfig">sharedConfig</a></li><li><a href="global.html#toSeriesOption">toSeriesOption</a></li><li><a href="global.html#useProfileTableData">useProfileTableData</a></li><li><a href="global.html#useTableData">useTableData</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Wed Oct 22 2025 21:30:01 GMT+0800 (中国标准时间)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
